<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Getting-Started/Step4-Stimulation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Stimulation with the PG4 | COSMIIC Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cosmiic-inc.github.io/img/COSMIIC-square-logo.svg"><meta data-rh="true" name="twitter:image" content="https://cosmiic-inc.github.io/img/COSMIIC-square-logo.svg"><meta data-rh="true" property="og:url" content="https://cosmiic-inc.github.io/Getting-Started/Step4-Stimulation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Stimulation with the PG4 | COSMIIC Documentation"><meta data-rh="true" name="description" content="This guide introduces the COSMIIC 4-Channel Pulse Generator (PG4), explaining its functionality and setup to generate basic pulses."><meta data-rh="true" property="og:description" content="This guide introduces the COSMIIC 4-Channel Pulse Generator (PG4), explaining its functionality and setup to generate basic pulses."><link data-rh="true" rel="icon" href="/img/Cosmiic_favicon-150x150.png"><link data-rh="true" rel="canonical" href="https://cosmiic-inc.github.io/Getting-Started/Step4-Stimulation"><link data-rh="true" rel="alternate" href="https://cosmiic-inc.github.io/Getting-Started/Step4-Stimulation" hreflang="en"><link data-rh="true" rel="alternate" href="https://cosmiic-inc.github.io/Getting-Started/Step4-Stimulation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting Started","item":"https://cosmiic-inc.github.io/category/getting-started"},{"@type":"ListItem","position":2,"name":"Stimulation with the PG4","item":"https://cosmiic-inc.github.io/Getting-Started/Step4-Stimulation"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M6W11VVRPY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-M6W11VVRPY",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-N93QS9GJ",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.c51123c8.css">
<script src="/assets/js/runtime~main.e3c98d16.js" defer="defer"></script>
<script src="/assets/js/main.c3457091.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N93QS9GJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Announcement: We will be presenting at the Open Healthware Conference on August 1-2, 2025! See FAQs for more conference dates</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Cosmiic_favicon-150x150.png" alt="COSMIIC Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Cosmiic_favicon-150x150.png" alt="COSMIIC Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">COSMIIC Documentation</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/COSMIIC-Inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://cosmiic.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main Site<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://cosmiic.atlassian.net/servicedesk/customer/portal/1/group/1/create/19" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://cosmiic.org/join-now/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Join Newsletter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/Cosmiic_favicon-150x150.png" alt="COSMIIC Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Cosmiic_favicon-150x150.png" alt="COSMIIC Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>COSMIIC Documentation</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome to COSMIIC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/development-kits">Development Kits</a><button aria-label="Expand sidebar category &#x27;Development Kits&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Getting-Started/Step1-Hardware">Setting up the Hardware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Getting-Started/Step2-Network">Understanding the System Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Getting-Started/Step3-Software">Controlling the System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Getting-Started/Step4-Stimulation">Stimulation with the PG4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Getting-Started/Example-Code">Examples</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/implantables">Implantables</a><button aria-label="Expand sidebar category &#x27;Implantables&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/externals">Externals</a><button aria-label="Expand sidebar category &#x27;Externals&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Software">Software</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/in-development-modules">In-Development Modules</a><button aria-label="Expand sidebar category &#x27;In-Development Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/community">Community</a><button aria-label="Expand sidebar category &#x27;Community&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/FAQs">FAQs</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/getting-started"><span>Getting Started</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Stimulation with the PG4</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Stimulation with the PG4</h1></header>
<p>This guide introduces the COSMIIC 4-Channel Pulse Generator (PG4), explaining its functionality and setup to generate basic pulses.</p>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="required">Required<a href="#required" class="hash-link" aria-label="Direct link to Required" title="Direct link to Required">​</a></h3>
<ul>
<li>PM Development Board</li>
<li>PG4 Development Board</li>
<li>Optional: Any additional modules (PG4 and/or BP2 Development Boards) may be present while controlling one PG4 module</li>
<li>Wireless Link board + USB-C cable</li>
<li>MATLAB</li>
<li>Local clone of the <a href="https://github.com/COSMIIC-Inc/NNP-API" target="_blank" rel="noopener noreferrer"><strong>NNP-API</strong></a> Github repository</li>
</ul>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hardware-overview">Hardware Overview<a href="#hardware-overview" class="hash-link" aria-label="Direct link to Hardware Overview" title="Direct link to Hardware Overview">​</a></h2>
<p>The PG4 Development Board consists of a PG4 module circuit board and an accompanying frame board for:</p>
<ul>
<li>Network connection</li>
<li>Output monitoring</li>
<li>Accessory/electrode connection</li>
</ul>
<p><img decoding="async" loading="lazy" alt="PG4 dev board with labeled test connections" src="/assets/images/PG4-Dev-Board-Labeled-df8b4d1f26e4327dcc67ead2a366a5f4.png" width="1152" height="864" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="connecting-the-hardware--stacking-modules">Connecting the Hardware / Stacking Modules<a href="#connecting-the-hardware--stacking-modules" class="hash-link" aria-label="Direct link to Connecting the Hardware / Stacking Modules" title="Direct link to Connecting the Hardware / Stacking Modules">​</a></h3>
<ul>
<li>Requires a PM  Development Board to provide power and communication</li>
<li>Modules can be stacked or connected via twisted pair cables for distributed setups.</li>
<li>Follow the directions on <strong><a href="/Getting-Started/Step1-Hardware">Setting up the System - Hardware</a></strong> for connecting modules to the PM</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="monitoring-stimulation-pulses">Monitoring Stimulation Pulses<a href="#monitoring-stimulation-pulses" class="hash-link" aria-label="Direct link to Monitoring Stimulation Pulses" title="Direct link to Monitoring Stimulation Pulses">​</a></h3>
<ul>
<li>Use oscilloscope on electrode outputs (touchproof or 2.54mm).</li>
<li>Measure all channels relative to anode.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Example setup for measuring stim output" src="/assets/images/PG4-Stim-Oscilloscope-893064d0c7f083498e99d2174e6746f5.png" width="1520" height="632" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stimulation-pulse-parameters">Stimulation Pulse Parameters<a href="#stimulation-pulse-parameters" class="hash-link" aria-label="Direct link to Stimulation Pulse Parameters" title="Direct link to Stimulation Pulse Parameters">​</a></h2>
<p>The PG4 generates biphasic, passive charge balanced waveforms with adjustable pulse width, pulse amplitude, and stim frequency. Below is a timing diagram which shows the relationship of configurable stimulation parameters.</p>
<p><img decoding="async" loading="lazy" alt="stimulation waveform diagram" src="/assets/images/stimulation-waveform-2becdabd2cf3eac0cfd9460b87974e9e.png" width="1617" height="756" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configurable-parameters">Configurable Parameters<a href="#configurable-parameters" class="hash-link" aria-label="Direct link to Configurable Parameters" title="Direct link to Configurable Parameters">​</a></h3>
<p>The following stimulation parameters are configurable in software:</p>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Range</th></tr></thead><tbody><tr><td>Pulse Width (PW)</td><td>Width in µs</td><td>1–255 µs (1 us resolution)</td></tr><tr><td>Pulse Amplitude (PA)</td><td>Amplitude in mA</td><td>0–20 mA (0.1 mA resolution)</td></tr><tr><td>Inter-Phase Interval</td><td>Time between phases</td><td>5–100 µs (1 us resolution, default 50)</td></tr><tr><td>Channel Period (SYNC)</td><td>Time between pulses (same channel)</td><td>10–65535 ms (1 us resolution, default 80)</td></tr><tr><td>Between Channel Timing</td><td>Time between channel pulses</td><td>1 ms default</td></tr></tbody></table>
<p>The operation of the network can be synced to a minimum cycle of 20ms. The Between Channel Timing adds 1 ms for each channel above channel 1 (e.g. channel 1 has a minimum SYNC period of 20 ms, channel 2 must be used with a SYNC greater than or equal to 21 ms... channel 4 must be used with a SYNC greater than or equal to 23 ms). To increase the frequency, certain details of the network operation must be altered to lessen the SYNC period or could be hard-coded directly into the PG4 firmware. PG4s have a hard-coded limit of 10 ms (10 Hz) which can theoretically be changed.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pulse-control-methods">Pulse Control Methods<a href="#pulse-control-methods" class="hash-link" aria-label="Direct link to Pulse Control Methods" title="Direct link to Pulse Control Methods">​</a></h3>
<p>There are several methods to control the stimulation outputs:</p>
<ol>
<li><strong>Direct parameter setting via PM</strong>
<ul>
<li>Maximum ~50Hz update rate for up to 24 channels</li>
<li>Requires PDO configuration of PM and PG4</li>
<li>Recommended for testing patterns, or where preloaded patterns are undesirable</li>
</ul>
</li>
<li><strong>Direct parameter setting via PG - SDO</strong>
<ul>
<li>Maximum ~4Hz update rate for 12 channels, or ~50Hz for single channel</li>
<li>Requires the least amount of configuration</li>
</ul>
</li>
<li><strong>Pattern based - Lookup table to map command level to PW/PA - SDO</strong>
<ul>
<li>Maximum ~50Hz update rate for channels</li>
<li>Limited to 8 degrees-of-freedom (commands) in system</li>
<li>Up to 48 channel patterns per PG4, with up to 20 breakpoints each<!-- -->
<ul>
<li>Linear interpolation between breakpoints</li>
</ul>
</li>
<li>Recommended for take-home or permanent systems</li>
<li>Maximum frequency limited by pulse set up time (~20Hz)</li>
<li>Requires patterns to be loaded into PG4</li>
</ul>
</li>
</ol>
<p><em>This guide will only focus on changing the PW, PA, and Channel Period via method 2, SDO.</em></p>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="programming-a-pulse-in-matlab">Programming a Pulse in MATLAB<a href="#programming-a-pulse-in-matlab" class="hash-link" aria-label="Direct link to Programming a Pulse in MATLAB" title="Direct link to Programming a Pulse in MATLAB">​</a></h2>
<p>You will need to know how the node # of your PG4 module and how to interact with the NNP-API in MATLAB. Follow directions in <strong><a href="/Getting-Started/Step3-Software">Controlling the System - Software</a></strong> to initialize an instance of <code>nnp=NNPHELPERS()</code> and use <code>rmbootloader(nnp)</code> or <code>netscanner(nnp)</code> to determine how your modules are mapped to nodes.</p>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">NNPHELPERS %</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="via-the-profiler-matlab-app">Via the Profiler MATLAB app<a href="#via-the-profiler-matlab-app" class="hash-link" aria-label="Direct link to Via the Profiler MATLAB app" title="Direct link to Via the Profiler MATLAB app">​</a></h3>
<p>The Profiler app is a GUI used to trigger stimulation at individual channels. This can be used as an easy way to confirm the setup of your PG4 and to test out individual elicited responses to stimulation rather than using a coordinated pattern. Other applications, such as <code>patternedit()</code> can be used to configure stimulation patterns to load directly to the PG4, but are not yet covered on this site.</p>
<ol>
<li>Make sure the network is ON by using <code>nnp.networkOn</code> command or a button in another GUI. The LED on the PG4 should start flashing.<!-- -->
<ul>
<li>The Profiler GUI will eventually give you option to turn the network on if it is not already on</li>
</ul>
</li>
<li>Open the Profiler app by entering <code>profiler(nnp)</code> into the MATLAB command window.</li>
</ol>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">networkOn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% turn network ON. This enables commands from the Profiler app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">profiler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% run profiler app through the COM port associated with the nnp instance</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="screenshot of profiler function&amp;#39;s GUI view" src="/assets/images/profiler-gui-0bb6709bc50e8a4c52c51159b1f96d44.png" width="512" height="346" class="img_ev3q"></p>
<ol start="3">
<li>Select the <code>node</code> and <code>channel</code> of the PG4 module you wish to control</li>
<li>Set <code>PA</code> and <code>PW</code> to your intended levels<!-- -->
<ul>
<li>Note: Frequency default is 12.5 Hz or 80 ms SYNC period. See below how to change frequency on the command line</li>
</ul>
</li>
<li>Select <code>Stim On</code> and the GUIs background should turn green. Stimulation will adjust as you change <code>PW</code> and <code>PA</code>, but will terminate and must be re-selected if you change <code>node</code> or <code>channel</code>.</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="via-command-line--script">Via Command Line / Script<a href="#via-command-line--script" class="hash-link" aria-label="Direct link to Via Command Line / Script" title="Direct link to Via Command Line / Script">​</a></h3>
<p>The following series of MATLAB commands can be used in scripts or in command line to generate stimulation pulses.</p>
<ol>
<li>Identify your intended pulse frequency in Hz and convert to a SYNC period in ms<!-- -->
<ul>
<li>SYNC period (ms) = 1000 / frequency</li>
<li>If intended frequency is 20 Hz, SYNC time = 1000 / 20 Hz = 50 ms</li>
<li>We recommend using a minimum 23 ms (maximum 43.5 Hz) SYNC period for the reason listed above in the <strong><a href="#configurable-parameters">Configurable Parameters</a></strong> section</li>
</ul>
</li>
<li>Set frequency with <code>nnp.setSync()</code> command in MATLAB<!-- -->
<ul>
<li>The argument for setSync() is a time duration in ms</li>
<li>Note: The network must be in waiting mode (<code>nnp.enterWaiting</code>) in order for the <code>nnp.setSync()</code> command to be effective and change the frequency.</li>
</ul>
</li>
</ol>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%sync period of 50 ms for 20 Hz frequency</span><br></span></code></pre></div></div>
<ol start="3">
<li>Enable stimulation by entering TestStim mode</li>
</ol>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enterTestStim</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%enable stimulation mode</span><br></span></code></pre></div></div>
<ol start="4">
<li>Identify your intended pulse width (PW) and pulse amplitude (PA)<!-- -->
<ul>
<li>PW is a value 0-255 in us</li>
<li>PA is a value 0-200 in mA adjusted by a scale of 10.</li>
<li>Example: If your intended waveform has a PW of 100 us and 5 mA, your values in the next step will be [100, 5*10] or [100, 50]</li>
</ul>
</li>
<li>Use the <code>nnp.write()</code> to set the stimulation parameters<!-- -->
<ul>
<li>This function is used to overwrite data in Object Dictionary by the subindex. Use command <code>doc NNPHELPERS</code> for more info.</li>
<li>The standard arguments are <code>dataOut = write(NNP, node, indexOD, subIndexOD, writeData)</code></li>
<li>The Object Dictionary index <code>indexOD</code> for stimulation parameters is <code>0x3212</code>. This index is sectioned into subindices to represent 4 channels. At this index are 4 sets of stored values that are read by the PG4 to determine the PW and PA of the individual channels.</li>
<li>Thus, in the case of setting stimulation parameters, the arguments are <code>nnp.write(node, &#x27;3212&#x27;, channel, [PW us, PA*10 mA])</code> and rewrite the PW and PA values at the <code>0x3212.[channel]</code> subindex.</li>
<li>Functionally &quot;turn off the stimulation&quot; by using another <code>nnp.write()</code> at the same node and channel with <code>[0, 0]</code> for <code>writeData</code> to stop charge output on each Sync cycle. Note that the system remains in TestStim mode however.</li>
</ul>
</li>
</ol>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%update stimulation parameters to be 50 us and 10 mA on node 5&#x27;s channel 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%update stimulation parameters to zeros to stop output of charge</span><br></span></code></pre></div></div>
<ol start="6">
<li>Exit stimulation mode by entering Waiting mode</li>
</ol>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enterWaiting</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%enable stimulation mode</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="putting-it-all-together---example-stimulation-script">Putting it all Together - Example Stimulation Script<a href="#putting-it-all-together---example-stimulation-script" class="hash-link" aria-label="Direct link to Putting it all Together - Example Stimulation Script" title="Direct link to Putting it all Together - Example Stimulation Script">​</a></h4>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">stimulationCommands.m</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">%% demonstrate stim on command line (recommended order of operations)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">%create instance of nnp for radio communication through Wireless Link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">NNPHELPERS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">% prepare system for stim mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">networkOn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% turn on network so PM can communicate with PG4s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%25ms sync or (1000 / 25 ms) = 40 Hz frequency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enterTestStim</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% mode change to enable stimulation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">% turn on stimulation at one channel. Make sure you have the correct node #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">%module at node 5, &#x27;indexOD for stim&#x27;, channel 1, 50ms pulsewidth, 5 mA pulseamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">%Turn off stimulation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">% Example: Set PW and PA on each channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">% Set channel 1 of node 5 to 50us, 5mA @ 40 Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% Set channel 2 of node 5 to 100us, 10mA @ 40 Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% Set channel 3 of node 5 to 150us, 15mA @ 40 Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3212&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">% Set channel 4 of node 5 to 255us, 20mA @ 40 Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">%transition from TestStim mode to Waiting. Stimulation will end.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nnp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enterWaiting</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><em>Congratulations! You’ve generated stimulation pulses!</em></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Getting-Started/Step3-Software"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Controlling the System</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Getting-Started/Example-Code"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Examples</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#required" class="table-of-contents__link toc-highlight">Required</a></li><li><a href="#hardware-overview" class="table-of-contents__link toc-highlight">Hardware Overview</a><ul><li><a href="#connecting-the-hardware--stacking-modules" class="table-of-contents__link toc-highlight">Connecting the Hardware / Stacking Modules</a></li><li><a href="#monitoring-stimulation-pulses" class="table-of-contents__link toc-highlight">Monitoring Stimulation Pulses</a></li></ul></li><li><a href="#stimulation-pulse-parameters" class="table-of-contents__link toc-highlight">Stimulation Pulse Parameters</a><ul><li><a href="#configurable-parameters" class="table-of-contents__link toc-highlight">Configurable Parameters</a></li><li><a href="#pulse-control-methods" class="table-of-contents__link toc-highlight">Pulse Control Methods</a></li></ul></li><li><a href="#programming-a-pulse-in-matlab" class="table-of-contents__link toc-highlight">Programming a Pulse in MATLAB</a><ul><li><a href="#via-the-profiler-matlab-app" class="table-of-contents__link toc-highlight">Via the Profiler MATLAB app</a></li><li><a href="#via-command-line--script" class="table-of-contents__link toc-highlight">Via Command Line / Script</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/Cosmiic_favicon-150x150.png" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="75" height="75"><img src="/img/Cosmiic_favicon-150x150.png" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="75" height="75"></div><div class="footer__copyright">Copyright © 2025 COSMIIC</div></div></div></footer></div>
</body>
</html>